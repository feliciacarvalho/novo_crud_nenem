{"remainingRequest":"/home/felicia/PEVN-CRUD-TUTORIAL/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/felicia/PEVN-CRUD-TUTORIAL/client/src/components/EmployeeTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/felicia/PEVN-CRUD-TUTORIAL/client/src/components/EmployeeTable.vue","mtime":1657584304058},{"path":"/home/felicia/PEVN-CRUD-TUTORIAL/client/node_modules/cache-loader/dist/cjs.js","mtime":1657594128558},{"path":"/home/felicia/PEVN-CRUD-TUTORIAL/client/node_modules/babel-loader/lib/index.js","mtime":1657594131326},{"path":"/home/felicia/PEVN-CRUD-TUTORIAL/client/node_modules/cache-loader/dist/cjs.js","mtime":1657594128558},{"path":"/home/felicia/PEVN-CRUD-TUTORIAL/client/node_modules/vue-loader/lib/index.js","mtime":1657594132906}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKCmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm57CiAgICAgICAgICAgIHNlYXJjaDogJycsCiAgICAgICAgICAgIGRpYWxvZ0RlbGV0ZTogZmFsc2UsCiAgICAgICAgICAgIHNlbGVjdGVkSXRlbUluZGV4OiAtMSwKICAgICAgICAgICAgaGVhZGVyczogWwogICAgICAgICAgICAgICAge3RleHQ6ICdJRCcsIHZhbHVlOiAnaWQnfSwKICAgICAgICAgICAgICAgIHt0ZXh0OiAnTmFtZScsIHZhbHVlOiAnbmFtZSd9LAogICAgICAgICAgICAgICAge3RleHQ6ICdEZXBhcnRlbWVudCcsIHZhbHVlOiAnZGVwYXJ0ZW1lbnQnfSwKICAgICAgICAgICAgICAgIHt0ZXh0OiAnQWN0aW9ucycsIHZhbHVlOiAnYWN0aW9ucyd9CiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIC8vIEVtcGxveWVlcyBkYXRhIGR1bW1pZXMKICAgICAgICAgICAgZW1wbG95ZWVzOiBbXQogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgbGlua05lYXRlZChsaW5rKXsKICAgICAgICAgICAgcmV0dXJuIGxpbmsucmVwbGFjZSgvXHMrL2csICctJykudG9Mb2NhbGVMb3dlckNhc2UoKQogICAgICAgIH0sCiAgICAgICAgZGVsZXRlSXRlbShpdGVtKXsKICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbSkKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEl0ZW1JbmRleCA9IHRoaXMuZW1wbG95ZWVzLmluZGV4T2YoaXRlbSkKICAgICAgICAgICAgdGhpcy5kaWFsb2dEZWxldGUgPSB0cnVlCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXgpCiAgICAgICAgfSwKICAgICAgICBjbG9zZURlbGV0ZSgpewogICAgICAgICAgICB0aGlzLmRpYWxvZ0RlbGV0ZSA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtSW5kZXggPSAtMQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZGVsZXRlSXRlbUNvbmZpcm0oKXsKICAgICAgICAgICAgY29uc3QgZGVsZXRlRW1wbG95ZWUgPSB0aGlzLmVtcGxveWVlc1t0aGlzLnNlbGVjdGVkSXRlbUluZGV4XQogICAgICAgICAgICBheGlvcwogICAgICAgICAgICAgICAgLmRlbGV0ZShgaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9lbXBsb3llZXMvJHtkZWxldGVFbXBsb3llZS5pZH1gKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuZW1wbG95ZWVzLnNwbGljZSh0aGlzLnNlbGVjdGVkSXRlbUluZGV4LCAxKQogICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEZWxldGUoKQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJERUxFVEUgU1VDQ0VTUyIsIHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIAogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCl7CiAgICAgICAgYXhpb3MKICAgICAgICAgICAgLmdldCgnaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9lbXBsb3llZXMvJykKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICAgICAgdGhpcy5lbXBsb3llZXMgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IpKQogICAgfQp9Cg=="},{"version":3,"sources":["EmployeeTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EmployeeTable.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <v-container>\n        <!-- Searchbox -->\n        <v-row align=\"center\">\n            <v-col cols=\"4\">\n                <v-text-field\n                    v-model=\"search\"\n                    single-line\n                    label=\"Search Employees...\"\n                ></v-text-field>\n            </v-col>\n        </v-row>\n\n        <v-row>\n            <v-col>\n                <v-data-table\n                    :headers=\"headers\"\n                    :items=\"employees\"\n                    :search=\"search\"\n                >\n                    <!-- Delete Dialog -->\n                    <template v-slot:top>\n                        <v-toolbar flat>\n                            <v-dialog v-model=\"dialogDelete\" max-width=\"500px\">\n                                <v-card>\n                                    <v-card-title class=\"headline\">Serius mau di delete ?</v-card-title>\n                                    <v-card-actions>\n                                        <v-spacer></v-spacer>\n                                        <v-btn color=\"primary\" @click=\"closeDelete\">Cancel</v-btn>\n                                        <v-btn color=\"primary\" @click=\"deleteItemConfirm\">Ok</v-btn>\n                                    </v-card-actions>\n                                </v-card>\n                            </v-dialog>\n                        </v-toolbar>\n                    </template>\n\n                    <!-- Employee Name (Link) -->\n                    <template v-slot:[`item.name`]=\"{ item }\">\n                        <router-link :to=\"`/details/${item.id}/${linkNeated(item.name)}`\">\n                            {{ item.name }}\n                        </router-link>\n                    </template>\n\n                    <!-- Actions colom -->\n                    <template v-slot:[`item.actions`]=\"{ item }\">\n                        <router-link style=\"text-decoration:none;\" :to=\"`/edit/${item.id}/${linkNeated(item.name)}`\">\n                            <v-icon\n                                \n                                class=\"mr-2\"\n                            >\n                                mdi-pencil\n                            </v-icon>\n                        </router-link>\n\n                        <v-icon\n                            @click=\"deleteItem(item)\"\n                        >\n                            mdi-delete\n                        </v-icon>\n                    </template>\n                </v-data-table>\n            </v-col>\n        </v-row>\n\n    </v-container>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n    data(){\n        return{\n            search: '',\n            dialogDelete: false,\n            selectedItemIndex: -1,\n            headers: [\n                {text: 'ID', value: 'id'},\n                {text: 'Name', value: 'name'},\n                {text: 'Departement', value: 'departement'},\n                {text: 'Actions', value: 'actions'}\n            ],\n            // Employees data dummies\n            employees: []\n        }\n    },\n    methods: {\n        linkNeated(link){\n            return link.replace(/\\s+/g, '-').toLocaleLowerCase()\n        },\n        deleteItem(item){\n            console.log(item)\n            this.selectedItemIndex = this.employees.indexOf(item)\n            this.dialogDelete = true\n            // console.log(this.selectedItemIndex)\n        },\n        closeDelete(){\n            this.dialogDelete = false\n            this.$nextTick(() => {\n                this.selectedItemIndex = -1\n            })\n        },\n        deleteItemConfirm(){\n            const deleteEmployee = this.employees[this.selectedItemIndex]\n            axios\n                .delete(`http://localhost:3000/api/employees/${deleteEmployee.id}`)\n                .then(response => {\n                    this.employees.splice(this.selectedItemIndex, 1)\n                    this.closeDelete()\n                    console.log(\"DELETE SUCCESS\", response.data)\n                })\n                .catch(error => {\n                    console.log(error)\n                })\n            \n        }\n    },\n    mounted(){\n        axios\n            .get('http://localhost:3000/api/employees/')\n            .then(response => {\n                this.employees = response.data\n                // console.log(response.data)\n            })\n            .catch(error => console.log(error))\n    }\n}\n</script>"]}]}